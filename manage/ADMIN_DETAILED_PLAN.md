# 管理後台詳細開發計劃 (ADMIN_DETAILED_PLAN.md)

## 專案資訊

| 項目 | 內容 |
|------|------|
| **專案名稱** | Nice_Speak Admin |
| **前端框架** | Nuxt.js 3 |
| **後端框架** | Rust + Axum |
| **資料庫** | MySQL 8 + Redis + MongoDB |

---

## 功能模組 (共 60 項)

---

### 1. 基礎建設 (10 項)

| # | 功能名稱 | 描述 | 預估 | 狀態 |
|---|----------|------|------|------|
| 1.1 | 建立專案結構 | admin/backend + admin/web | 1h | ⏳ |
| 1.2 | Nuxt.js 3 初始化 | TailwindCSS + Element Plus | 1h | ⏳ |
| 1.3 | Rust 後端初始化 | Axum + SQLx | 1h | ⏳ |
| 1.4 | 管理員認證 API | JWT 登入/登出 | 2h | ⏳ |
| 1.5 | 管理員權限 Middleware | RBAC 控制 | 2h | ⏳ |
| 1.6 | 審計日誌服務 | 記錄操作日誌 | 2h | ⏳ |
| 1.7 | 管理者 CRUD API | 管理員管理 | 2h | ⏳ |
| 1.8 | 角色權限 API | RBAC 角色管理 | 2h | ⏳ |
| 1.9 | Admin Layout | 側邊欄 + 頂部 | 2h | ⏳ |
| 1.10 | 登入頁面 | 管理者登入 | 2h | ⏳ |

---

### 2. 客戶管理 (12 項)

| # | 功能名稱 | 描述 | 預估 | 狀態 |
|---|----------|------|------|------|
| 2.1 | 客戶列表 API | 分頁 + 篩選 | 2h | ⏳ |
| 2.2 | 客戶詳情 API | 完整資料查詢 | 1h | ⏳ |
| 2.3 | 客戶搜尋 | 姓名/Email/ID | 1h | ⏳ |
| 2.4 | 客戶狀態管理 | 啟用/停用/封禁 | 2h | ⏳ |
| 2.5 | 設備列表 API | 客戶設備查詢 | 1h | ⏳ |
| 2.6 | 訂閱列表 API | 客戶訂閱歷史 | 1h | ⏳ |
| 2.7 | 練習記錄 API | 練習歷史查詢 | 2h | ⏳ |
| 2.8 | 錯誤記錄 API | 錯誤統計 | 1h | ⏳ |
| 2.9 | 客戶列表頁面 | 表格 + 篩選 | 2h | ⏳ |
| 2.10 | 客戶詳情頁面 | 完整資訊卡片 | 2h | ⏳ |
| 2.11 | 設備管理頁面 | 設備列表 | 1h | ⏳ |
| 2.12 | 練習統計頁面 | 練習記錄 | 2h | ⏳ |

---

### 3. 情境模板管理 (12 項)

| # | 功能名稱 | 描述 | 預估 | 狀態 |
|---|----------|------|------|------|
| 3.1 | 模板列表 API | 分頁 + 篩選 | 2h | ⏳ |
| 3.2 | 模板 CRUD API | 新增/修改/刪除 | 3h | ⏳ |
| 3.3 | 模板詳情 API | 取得模板內容 | 1h | ⏳ |
| 3.4 | 模板發布/下架 | 狀態切換 | 1h | ⏳ |
| 3.5 | 對話設計 API | 對話內容管理 | 3h | ⏳ |
| 3.6 | 角色管理 API | 6 種角色 CRUD | 2h | ⏳ |
| 3.7 | 分類管理 API | 分類 CRUD | 2h | ⏳ |
| 3.8 | 模板列表頁面 | 卡片式列表 | 2h | ⏳ |
| 3.9 | 模板編輯頁面 | 表單編輯器 | 4h | ⏳ |
| 3.10 | 對話設計器 | 拖曳式對話編輯 | 4h | ⏳ |
| 3.11 | 角色管理頁面 | 角色列表 | 2h | ⏳ |
| 3.12 | 模板預覽 | 預覽效果 | 2h | ⏳ |

---

### 4. 收費管理 (12 項)

| # | 功能名稱 | 描述 | 預估 | 狀態 |
|---|----------|------|------|------|
| 4.1 | 方案列表 API | 訂閱方案 CRUD | 2h | ⏳ |
| 4.2 | 方案詳情 API | 取得方案內容 | 1h | ⏳ |
| 4.3 | 方案排序 | 調整顯示順序 | 1h | ⏳ |
| 4.4 | 訂閱列表 API | 所有訂閱記錄 | 2h | ⏳ |
| 4.5 | 訂閱詳情 API | 訂閱完整資訊 | 1h | ⏳ |
| 4.6 | 訂閱狀態管理 | 升級/降級/取消 | 2h | ⏳ |
| 4.7 | 支付列表 API | 支付歷史 | 1h | ⏳ |
| 4.8 | 退款處理 API | 申請/審批 | 2h | ⏳ |
| 4.9 | 優惠碼 API | 優惠碼 CRUD | 2h | ⏳ |
| 4.10 | 方案管理頁面 | 方案列表 + 編輯 | 2h | ⏳ |
| 4.11 | 訂閱管理頁面 | 訂閱列表 | 2h | ⏳ |
| 4.12 | 支付記錄頁面 | 支付歷史 | 2h | ⏳ |

---

### 5. 數據分析 (8 項)

| # | 功能名稱 | 描述 | 預估 | 狀態 |
|---|----------|------|------|------|
| 5.1 | 使用統計 API | DAU/MAU/新用戶 | 2h | ⏳ |
| 5.2 | 訂閱轉化 API | 免費→付費轉化率 | 2h | ⏳ |
| 5.3 | 收入報表 API | 每日/每月收入 | 2h | ⏳ |
| 5.4 | 留存分析 API | 用戶留存率 | 2h | ⏳ |
| 5.5 | 錯誤分析 API | 常見錯誤統計 | 2h | ⏳ |
| 5.6 | 儀表板頁面 | 統計圖表 | 4h | ⏳ |
| 5.7 | 收入報表頁面 | 收入圖表 | 3h | ⏳ |
| 5.8 | 分析導出 | CSV/Excel 匯出 | 2h | ⏳ |

---

### 6. 系統設定 (6 項)

| # | 功能名稱 | 描述 | 預估 | 狀態 |
|---|----------|------|------|------|
| 6.1 | 角色設定 API | 6 種角色管理 | 2h | ⏳ |
| 6.2 | 分類設定 API | 分類 CRUD | 1h | ⏳ |
| 6.3 | 難度設定 API | 難度等級 | 1h | ⏳ |
| 6.4 | 試用參數 API | 試用天數設定 | 1h | ⏳ |
| 6.5 | 設定頁面 | 系統參數編輯 | 2h | ⏳ |
| 6.6 | 服務商設定 | API Key 管理 | 2h | ⏳ |

---

## 總覽表

| 模組 | 功能數 | 預估時間 |
|------|--------|----------|
| 1. 基礎建設 | 10 | 17h |
| 2. 客戶管理 | 12 | 18h |
| 3. 情境模板 | 12 | 28h |
| 4. 收費管理 | 12 | 20h |
| 5. 數據分析 | 8 | 19h |
| 6. 系統設定 | 6 | 10h |
| **總計** | **60** | **112h** |

---

## 頁面結構

```
admin/
├── login                 # 登入頁
├── dashboard             # 儀表板
├── customers/           # 客戶管理
│   ├── index           # 列表
│   └── [id]            # 詳情
├── scenarios/           # 情境模板
│   ├── index           # 列表
│   ├── create          # 新增
│   ├── [id]/edit       # 編輯
│   └── [id]/preview    # 預覽
├── subscriptions/       # 收費管理
│   ├── plans           # 方案管理
│   ├── orders          # 訂閱列表
│   └── payments         # 支付記錄
├── analytics/           # 數據分析
│   ├── overview        # 總覽
│   ├── revenue         # 收入
│   └── retention       # 留存
├── settings/           # 系統設定
│   ├── roles           # 角色設定
│   ├── categories       # 分類設定
│   └── parameters      # 參數設定
└── audit/              # 審計日誌
    ├── logs            # 操作日誌
    └── logins          # 登入日誌
```

---

## 權限控制

| 角色 | 客戶管理 | 情境管理 | 收費管理 | 數據分析 | 系統設定 |
|------|----------|----------|----------|----------|----------|
| 超級管理員 | ✅ 全部 | ✅ 全部 | ✅ 全部 | ✅ 全部 | ✅ 全部 |
| 系統管理員 | ✅ 全部 | ✅ 全部 | ✅ 全部 | ✅ 全部 | ❌ |
| 客服人員 | 查看 | ❌ | 查看 | ❌ | ❌ |
| 內容管理員 | ❌ | ✅ 全部 | ❌ | ❌ | ❌ |
| 分析人員 | ❌ | ❌ | ❌ | ✅ 全部 | ❌ |
| 財務人員 | ❌ | ❌ | ✅ 全部 | ✅ 全部 | ❌ |

---

## 技術栈

### 前端

| 項目 | 技術 |
|------|------|
| Framework | Nuxt.js 3 |
| UI | Element Plus + TailwindCSS |
| 圖表 | ECharts |
| 表單 | FormKit / VeeValidate |
| 狀態管理 | Pinia |

### 後端

| 項目 | 技術 |
|------|------|
| Framework | Rust + Axum |
| ORM | SQLx |
| 資料庫 | MySQL 8 |
| 快取 | Redis |
| 認證 | JWT |

---

**版本**: v1.0.0  
**建立日期**: 2024-XX-XX
