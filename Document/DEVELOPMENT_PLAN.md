# 開發計劃 (DEVELOPMENT_PLAN.md)

## 專案資訊

| 項目 | 內容 |
|------|------|
| **專案名稱** | Nice_Speak |
| **App 名稱** | Nice Speak |
| **版本** | v1.0.0 |
| **預估工期** | 12 週 |

---

## 執行追蹤總覽

| 階段 | 名稱 | 開始時間 | 結束時間 | 狀態 | 工期 |
|------|------|----------|----------|------|------|
| **Phase 1** | 基礎建設 | 2025-01-06 09:00:00 | 2025-01-17 18:00:00 | ✅ 已完成 | 2 週 |
| **Phase 2** | 情境系統 | 2025-01-20 09:00:00 | 2025-01-31 18:00:00 | ✅ 已完成 | 2 週 |
| **Phase 3** | 語音系統 | 2025-02-03 09:00:00 | 2025-02-14 18:00:00 | ✅ 已完成 | 2 週 |
| **Phase 4** | AI 評估 | 2025-02-17 09:00:00 | 2025-02-28 18:00:00 | ✅ 已完成 | 2 週 |
| **Phase 5** | 等級系統 | 2025-03-03 09:00:00 | 2025-03-07 18:00:00 | ✅ 已完成 | 1 週 |
| **Phase 6** | 訂閱系統 | 2025-03-10 09:00:00 | 2025-03-21 18:00:00 | ✅ 已完成 | 2 週 |
| **Phase 7** | 權限管理系統 | 2025-02-11 09:00:00 | 2025-02-14 18:00:00 | 🔄 執行中 | - |
| **Phase 8** | 整合測試 | 2025-03-24 09:00:00 | 2025-03-28 18:00:00 | ⏳ 待執行 | 1 週 |

---

## Phase 1：基礎建設 (第 1-2 週)

| # | 任務 | 描述 | 開始時間 | 結束時間 | 依賴 | 狀態 |
|---|------|------|----------|----------|------|------|
| 1.1 | 建立 GitHub Repo | 建立遠端倉庫 | 2025-01-06 09:00:00 | 2025-01-06 10:00:00 | - | ✅ |
| 1.2 | 初始化 Flutter 專案 | 建立 mobile/ 目錄 | 2025-01-06 10:00:00 | 2025-01-07 18:00:00 | - | ✅ |
| 1.3 | 初始化 Nuxt.js 3 專案 | 建立 web/ 目錄 | 2025-01-06 10:00:00 | 2025-01-07 18:00:00 | - | ✅ |
| 1.4 | 初始化 Rust 後端 | 建立 backend/ 目錄 | 2025-01-06 10:00:00 | 2025-01-07 18:00:00 | - | ✅ |
| 1.5 | i18n 架構設定 | Flutter + Nuxt.js 多語系框架 | 2025-01-08 09:00:00 | 2025-01-09 18:00:00 | 1.2, 1.3 | ✅ |
| 1.6 | 正體中文語系檔 | 建立 zh_TW 翻譯檔 | 2025-01-08 09:00:00 | 2025-01-09 18:00:00 | 1.5 | ✅ |
| 1.7 | 資料庫遷移腳本 | 建立 MySQL 8 表結構 | 2025-01-08 09:00:00 | 2025-01-10 18:00:00 | 1.4 | ✅ |
| 1.8 | 後端配置管理 | config.rs 實作 | 2025-01-08 09:00:00 | 2025-01-09 18:00:00 | 1.4 | ✅ |
| 1.9 | JWT 認證模組 | 登入/註冊/Token 刷新 | 2025-01-10 09:00:00 | 2025-01-14 18:00:00 | 1.4, 1.7 | ✅ |
| 1.10 | 用戶 CRUD API | 個人資料管理 | 2025-01-13 09:00:00 | 2025-01-14 18:00:00 | 1.9 | ✅ |
| 1.11 | 設備綁定 API | 設備識別 + 防濫用機制 | 2025-01-13 09:00:00 | 2025-01-14 18:00:00 | 1.7 | ✅ |
| 1.12 | 前端 API 服務層 | Axios + API 封裝 | 2025-01-13 09:00:00 | 2025-01-14 18:00:00 | 1.2, 1.3 | ✅ |
| 1.13 | 前端認證頁面 | 登入/註冊頁面 | 2025-01-15 09:00:00 | 2025-01-16 18:00:00 | 1.12, 1.10 | ✅ |
| 1.14 | 設備綁定頁面 | 設備檢查 + 導向登入 | 2025-01-15 09:00:00 | 2025-01-17 18:00:00 | 1.11, 1.12 | ✅ |

---

## Phase 2：情境系統 (第 3-4 週)

| # | 任務 | 描述 | 開始時間 | 結束時間 | 依賴 | 狀態 |
|---|------|------|----------|----------|------|------|
| 2.1 | 情境資料模型 | Scenario/Dialogue 結構 | 2025-01-20 09:00:00 | 2025-01-21 18:00:00 | P1 | ✅ |
| 2.2 | 情境 API - 列表 | 取得情境列表 | 2025-01-20 09:00:00 | 2025-01-21 18:00:00 | P1 | ✅ |
| 2.3 | 情境 API - 詳情 | 取得情境內容 | 2025-01-22 09:00:00 | 2025-01-23 18:00:00 | 2.2 | ✅ |
| 2.4 | 情境 API - 篩選 | 分類/難度/角色過濾 | 2025-01-22 09:00:00 | 2025-01-24 18:00:00 | 2.2 | ✅ |
| 2.5 | 單字資料模型 | Vocabulary 結構 | 2025-01-20 09:00:00 | 2025-01-21 18:00:00 | P1 | ✅ |
| 2.6 | 單字 API | 單字查詢 | 2025-01-22 09:00:00 | 2025-01-23 18:00:00 | 2.5 | ✅ |
| 2.7 | 前端情境列表 | 卡片式列表頁面 | 2025-01-27 09:00:00 | 2025-01-28 18:00:00 | P1 | ✅ |
| 2.8 | 前端情境詳情 | 對話預覽頁面 | 2025-01-27 09:00:00 | 2025-01-28 18:00:00 | 2.3 | ✅ |
| 2.9 | 前端單字顯示 | 單字卡片元件 | 2025-01-29 09:00:00 | 2025-01-30 18:00:00 | 2.6 | ✅ |
| 2.10 | 前端路由配置 | Vue Router 設定 | 2025-01-29 09:00:00 | 2025-01-31 18:00:00 | P1 | ✅ |

---

## Phase 3：語音系統 (第 5-6 週)

| # | 任務 | 描述 | 開始時間 | 結束時間 | 依賴 | 狀態 |
|---|------|------|----------|----------|------|------|
| 3.1 | STT 服務整合 | 語音轉文字 API | 2025-02-03 09:00:00 | 2025-02-05 18:00:00 | P2 | ✅ |
| 3.2 | TTS 服務整合 | 文字轉語音 API | 2025-02-03 09:00:00 | 2025-02-05 18:00:00 | P2 | ✅ |
| 3.3 | WebSocket 服務 | 即時對話通道 | 2025-02-06 09:00:00 | 2025-02-07 18:00:00 | P1 | ✅ |
| 3.4 | 練習開始 API | 建立練習會話 | 2025-02-06 09:00:00 | 2025-02-07 18:00:00 | 2.2 | ✅ |
| 3.5 | 語音提交 API | 接收音頻 + STT | 2025-02-10 09:00:00 | 2025-02-11 18:00:00 | 3.1, 3.3 | ✅ |
| 3.6 | Flutter 錄音模組 | 語音錄製功能 | 2025-02-10 09:00:00 | 2025-02-11 18:00:00 | P1 | ✅ |
| 3.7 | Flutter TTS 播放 | 語音播放功能 | 2025-02-12 09:00:00 | 2025-02-12 18:00:00 | P1 | ✅ |
| 3.8 | Vue WebRTC 錄音 | 瀏覽器錄音 | 2025-02-12 09:00:00 | 2025-02-12 18:00:00 | P1 | ✅ |
| 3.9 | 對話頁面 UI | 即時對話介面 | 2025-02-13 09:00:00 | 2025-02-14 18:00:00 | 2.7, 2.8 | ✅ |
| 3.10 | 語音控制 | 錄音/播放/停止 | 2025-02-13 09:00:00 | 2025-02-14 18:00:00 | 3.6, 3.7 | ✅ |

---

## Phase 4：AI 評估 (第 7-8 週)

| # | 任務 | 描述 | 開始時間 | 結束時間 | 依賴 | 狀態 |
|---|------|------|----------|----------|------|------|
| 4.1 | AI 評估 API | GPT-4/Claude 整合 | 2025-02-17 09:00:00 | 2025-02-19 18:00:00 | P3 | ✅ |
| 4.2 | 發音評估 | 發音分數計算 | 2025-02-17 09:00:00 | 2025-02-19 18:00:00 | 4.1 | ✅ |
| 4.3 | 語法評估 | 語法分數計算 | 2025-02-20 09:00:00 | 2025-02-21 18:00:00 | 4.1 | ✅ |
| 4.4 | 用詞評估 | 用詞分數計算 | 2025-02-20 09:00:00 | 2025-02-21 18:00:00 | 4.1 | ✅ |
| 4.5 | 流暢度評估 | 流暢度分數計算 | 2025-02-24 09:00:00 | 2025-02-25 18:00:00 | 4.1 | ✅ |
| 4.6 | 評估結果 API | 回傳完整評分 | 2025-02-24 09:00:00 | 2025-02-25 18:00:00 | 4.2-4.5 | ✅ |
| 4.7 | 練習記錄 API | 儲存練習結果 | 2025-02-26 09:00:00 | 2025-02-26 18:00:00 | P3 | ✅ |
| 4.8 | 錯誤日誌 API | 記錄錯誤句子 | 2025-02-26 09:00:00 | 2025-02-27 18:00:00 | P3 | ✅ |
| 4.9 | 前端評估顯示 | 分數卡片元件 | 2025-02-28 09:00:00 | 2025-02-28 18:00:00 | 4.6 | ✅ |
| 4.10 | 前端反饋顯示 | AI 建議顯示 | 2025-02-28 09:00:00 | 2025-02-28 18:00:00 | 4.6 | ✅ |

---

## Phase 5：等級系統 (第 9 週)

| # | 任務 | 描述 | 開始時間 | 結束時間 | 依賴 | 狀態 |
|---|------|------|----------|----------|------|------|
| 5.1 | 等級計算服務 | 0-10 級計算 | 2025-03-03 09:00:00 | 2025-03-04 18:00:00 | P4 | ✅ |
| 5.2 | 升級判斷 | 連續/累計達標 | 2025-03-04 09:00:00 | 2025-03-05 18:00:00 | 5.1 | ✅ |
| 5.3 | 折扣計算 | 80%/60% 折扣 | 2025-03-05 09:00:00 | 2025-03-05 18:00:00 | 5.1 | ✅ |
| 5.4 | 等級 API | 取得用戶等級 | 2025-03-06 09:00:00 | 2025-03-06 18:00:00 | 5.1 | ✅ |
| 5.5 | 進度 API | 練習進度查詢 | 2025-03-06 09:00:00 | 2025-03-06 18:00:00 | P4 | ✅ |
| 5.6 | 前端等級顯示 | 等級進度條 | 2025-03-07 09:00:00 | 2025-03-07 18:00:00 | 5.4 | ✅ |
| 5.7 | 前端統計儀表板 | 練習統計 | 2025-03-07 09:00:00 | 2025-03-07 18:00:00 | 5.5 | ✅ |
| 5.8 | 升級彈窗 | 升級通知 UI | 2025-03-07 09:00:00 | 2025-03-07 18:00:00 | 5.2 | ✅ |
| 5.9 | 錯誤複習 API | 錯誤清單查詢 | 2025-03-07 09:00:00 | 2025-03-07 18:00:00 | P4 | ✅ |
| 5.10 | 錯誤複習頁面 | 複習介面 | 2025-03-07 09:00:00 | 2025-03-07 18:00:00 | 5.9 | ✅ |

---

## Phase 6：訂閱系統 (第 10-11 週)

| # | 任務 | 描述 | 開始時間 | 結束時間 | 依賴 | 狀態 |
|---|------|------|----------|----------|------|------|
| 6.1 | 訂閱方案 API | 取得方案列表 | 2025-03-10 09:00:00 | 2025-03-10 18:00:00 | P1 | ✅ |
| 6.2 | 訂閱購買 API | 建立訂單 | 2025-03-10 09:00:00 | 2025-03-11 18:00:00 | P5 | ✅ |
| 6.3 | 支付整合 | 綠界科技/Stripe | 2025-03-12 09:00:00 | 2025-03-14 18:00:00 | 6.2 | ✅ |
| 6.4 | 訂閱狀態 API | 查詢訂閱狀態 | 2025-03-14 09:00:00 | 2025-03-14 18:00:00 | 6.1 | ✅ |
| 6.5 | 訂閱過期處理 | 自動降級 | 2025-03-17 09:00:00 | 2025-03-17 18:00:00 | 6.4 | ✅ |
| 6.6 | 權限檢查 Middleware | 訂閱權限 | 2025-03-17 09:00:00 | 2025-03-18 18:00:00 | P1 | ✅ |
| 6.7 | 前端訂閱頁面 | 方案選擇 UI | 2025-03-18 09:00:00 | 2025-03-19 18:00:00 | 6.1 | ✅ |
| 6.8 | 前端支付流程 | 付款介面 | 2025-03-19 09:00:00 | 2025-03-20 18:00:00 | 6.3 | ✅ |
| 6.9 | 前端訂閱管理 | 訂閱狀態顯示 | 2025-03-20 09:00:00 | 2025-03-21 18:00:00 | 6.4 | ✅ |
| 6.10 | 試用期管理 | 3天/7天邏輯 | 2025-03-21 09:00:00 | 2025-03-21 18:00:00 | P1 | ✅ |

---

## Phase 7：權限管理系統 (第 8 週) - 新增

| # | 任務 | 描述 | 開始時間 | 結束時間 | 依賴 | 狀態 |
|---|------|------|----------|----------|------|------|
| 7.1 | RBAC 設計文件 | 角色/權限/菜單設計 | 2025-02-11 09:00:00 | 2025-02-11 12:00:00 | P1 | ✅ |
| 7.2 | 資料庫遷移腳本 | roles/permissions/menus 表 | 2025-02-11 12:00:00 | 2025-02-11 18:00:00 | P1 | ✅ |
| 7.3 | Rust 後端 API | 角色 CRUD | 2025-02-12 09:00:00 | 2025-02-12 18:00:00 | P1 | ✅ |
| 7.4 | Rust 後端 API | 權限 CRUD | 2025-02-12 09:00:00 | 2025-02-12 18:00:00 | P1 | ✅ |
| 7.5 | Rust 後端 API | 菜單 CRUD | 2025-02-13 09:00:00 | 2025-02-13 18:00:00 | P1 | ✅ |
| 7.6 | Rust 後端 API | 我的權限/菜單 | 2025-02-13 09:00:00 | 2025-02-13 18:00:00 | 7.3 | ✅ |
| 7.7 | 前端權限管理頁面 | 角色管理 UI | 2025-02-14 09:00:00 | 2025-02-14 18:00:00 | 7.3 | ✅ |
| 7.8 | 前端菜單管理頁面 | 菜單配置 UI | 2025-02-14 09:00:00 | 2025-02-14 18:00:00 | 7.5 | ✅ |
| 7.9 | 預設資料初始化 | 7 種角色 + 22 種權限 | 2025-02-14 09:00:00 | 2025-02-14 18:00:00 | 7.1 | ✅ |
| 7.10 | API 文件更新 | 更新 API 文件 | 2025-02-14 17:00:00 | 2025-02-14 18:00:00 | 7.3-7.6 | ✅ |

---

## Phase 8：整合測試 (第 12 週)

| # | 任務 | 描述 | 開始時間 | 結束時間 | 依賴 | 狀態 |
|---|------|------|----------|----------|------|------|
| 8.1 | API 整合測試 | 全 API 測試 | 2025-03-24 09:00:00 | 2025-03-25 18:00:00 | P1-P7 | ⏳ |
| 8.2 | 前端整合測試 | E2E 測試 | 2025-03-26 09:00:00 | 2025-03-26 18:00:00 | P1-P7 | ⏳ |
| 8.3 | 效能測試 | 負載測試 | 2025-03-27 09:00:00 | 2025-03-27 18:00:00 | 8.1 | ⏳ |
| 8.4 | 安全測試 | 滲透測試 | 2025-03-27 09:00:00 | 2025-03-27 18:00:00 | 8.1 | ⏳ |
| 8.5 | 文件更新 | API 文件更新 | 2025-03-28 09:00:00 | 2025-03-28 12:00:00 | P1-P7 | ⏳ |
| 8.6 | 部署腳本 | Docker 設定 | 2025-03-28 12:00:00 | 2025-03-28 18:00:00 | P1-P7 | ⏳ |
| 8.7 | 上線檢查清單 | Release Checklist | 2025-03-28 17:00:00 | 2025-03-28 18:00:00 | 8.1-8.6 | ⏳ |

---

## 開發任務追蹤總表

### 符號說明

| 符號 | 意義 |
|------|------|
| ⏳ | 待執行 |
| 🔄 | 執行中 |
| ✅ | 已完成 |
| ❌ | 已阻擋 |

### 總計

| 階段 | 任務數 | 完成 | 執行中 | 待執行 |
|------|--------|------|--------|--------|
| Phase 1 | 14 | 14 | 0 | 0 |
| Phase 2 | 10 | 10 | 0 | 0 |
| Phase 3 | 10 | 10 | 0 | 0 |
| Phase 4 | 10 | 10 | 0 | 0 |
| Phase 5 | 10 | 10 | 0 | 0 |
| Phase 6 | 10 | 10 | 0 | 0 |
| Phase 7 | 10 | 10 | 0 | 0 |
| Phase 8 | 7 | 0 | 0 | 7 |
| **總計** | **81** | **74** | **0** | **7** |

### 完成率

| 指標 | 數值 |
|------|------|
| 總任務數 | 81 |
| 已完成 | 74 |
| 執行中 | 0 |
| 待執行 | 7 |
| **完成率** | **91.4%** |

---

## 測試覆蓋率標準

| 類型 | 最低覆蓋率 | 實際覆蓋率 |
|------|------------|------------|
| 單元測試 | 80% | - |
| 整合測試 | 100% 關鍵流程 | ⏳ |
| E2E 測試 | 6 大流程 | ⏳ |

---

## 風險評估

| 風險 | 影響 | 機率 | 對策 |
|------|------|------|------|
| STT/TTS 延遲 | 高 | 中 | 快取 + 預載 |
| AI API 成本 | 高 | 中 | 限流 + 優化 |
| 支付整合延遲 | 中 | 低 | 提前對接 |
| 效能瓶頸 | 中 | 中 | 水平擴展 |

---

## 里程碑

| 日期 | 里程碑 | 狀態 |
|------|--------|------|
| 2025-01-17 | Phase 1 完成 | ✅ |
| 2025-01-31 | Phase 2 完成 | ✅ |
| 2025-02-14 | Phase 3 完成 | ✅ |
| 2025-02-28 | Phase 4 完成 | ✅ |
| 2025-03-07 | Phase 5 完成 | ✅ |
| 2025-03-21 | Phase 6 完成 | ✅ |
| 2025-02-14 | Phase 7 完成 | ✅ |
| 2025-03-28 | Phase 8 完成 + 上線 | ⏳ |

---

**版本**: v1.1.0  
**建立日期**: 2024-XX-XX  
**最後更新**: 2026-02-11 08:00:00
