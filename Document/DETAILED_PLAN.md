# 詳細開發計劃 (DETAILED_PLAN.md)

## 專案資訊

| 項目 | 內容 |
|------|------|
| **專案名稱** | Nice_Speak |
| **App 名稱** | Nice Speak |
| **版本** | v1.0.0 |

---

## 功能清單 (共 67 項)

### 1. 基礎建設 (12 項)

| # | 功能名稱 | 描述 | 依賴 | 預估 | 狀態 |
|---|----------|------|------|------|------|
| 1.1 | 建立 GitHub Repo | 建立遠端倉庫 | - | 30m | ⏳ |
| 1.2 | 初始化 Flutter 專案 | 建立 mobile/ 目錄 | 1.1 | 1h | ⏳ |
| 1.3 | 初始化 Nuxt.js 3 專案 | 建立 web/ 目錄 | 1.1 | 1h | ⏳ |
| 1.4 | 初始化 Rust 後端 | 建立 backend/ 目錄 | 1.1 | 1h | ⏳ |
| 1.5 | i18n 架構設定 | Flutter + Nuxt.js 多語系框架 | 1.2, 1.3 | 2h | ⏳ |
| 1.6 | 正體中文語系檔 | 建立 zh_TW 翻譯檔 | 1.5 | 2h | ⏳ |
| 1.7 | 建立 MySQL 遷移腳本 | 設備表 + 用戶表 | 1.4 | 2h | ⏳ |
| 1.8 | 後端配置管理 | config.rs 實作 | 1.4 | 1h | ⏳ |
| 1.9 | JWT 認證服務 | 登入/註冊/Token 刷新 | 1.4, 1.7 | 4h | ⏳ |
| 1.10 | 用戶 CRUD API | 個人資料管理 | 1.9 | 2h | ⏳ |
| 1.11 | 設備綁定 API | 設備識別 + 防濫用機制 | 1.7 | 2h | ⏳ |
| 1.12 | 前端 API 服務層 | Axios + Dio 封裝 | 1.2, 1.3 | 2h | ⏳ |

---

### 2. 設備綁定 (8 項)

| # | 功能名稱 | 描述 | 依賴 | 預估 | 狀態 |
|---|----------|------|------|------|------|
| 2.1 | Flutter 設備識別 | device_info_plus + 指紋產生 | 1.2 | 2h | ⏳ |
| 2.2 | Flutter 設備狀態檢查 | 檢查試用狀態 + 時間計算 | 2.1 | 2h | ⏳ |
| 2.3 | Flutter 免費試用邏輯 | 初次使用記錄 + 過期判斷 | 2.2 | 2h | ⏳ |
| 2.4 | Nuxt.js 設備指紋 | 瀏覽器指紋產生 | 1.3 | 1h | ⏳ |
| 2.5 | Nuxt.js 設備狀態檢查 | LocalStorage + API | 2.4 | 1h | ⏳ |
| 2.6 | Nuxt.js 免費試用邏輯 | 初次使用記錄 + 過期判斷 | 2.5 | 1h | ⏳ |
| 2.7 | 設備綁定資料庫表 | devices + device_usage_logs | 1.7 | 1h | ⏳ |
| 2.8 | 設備綁定後端 API | status/register/mark | 1.11 | 2h | ⏳ |

---

### 3. 用戶認證 (10 項)

| # | 功能名稱 | 描述 | 依賴 | 預估 | 狀態 |
|---|----------|------|------|------|------|
| 3.1 | Flutter 登入頁面 | 輸入框 + 驗證 | 1.12 | 2h | ⏳ |
| 3.2 | Flutter 註冊頁面 | 輸入框 + 驗證 | 1.12 | 2h | ⏳ |
| 3.3 | Flutter 認證 API 服務 | 封裝登入/註冊 API | 1.12 | 1h | ⏳ |
| 3.4 | Flutter Token 管理 | 儲存/刷新/過期處理 | 1.9 | 2h | ⏳ |
| 3.5 | Flutter 會話狀態 | Provider 狀態管理 | 3.1 | 1h | ⏳ |
| 3.6 | Nuxt.js 登入頁面 | 輸入框 + 驗證 | 1.12 | 2h | ⏳ |
| 3.7 | Nuxt.js 註冊頁面 | 輸入框 + 驗證 | 1.12 | 2h | ⏳ |
| 3.8 | Nuxt.js 認證 API 服務 | 封裝登入/註冊 API | 1.12 | 1h | ⏳ |
| 3.9 | Nuxt.js Token 管理 | Pinia + LocalStorage | 1.9 | 2h | ⏳ |
| 3.10 | Nuxt.js 會話狀態 | Pinia Auth Store | 3.6 | 1h | ⏳ |

---

### 4. 情境系統 (12 項)

| # | 功能名稱 | 描述 | 依賴 | 預估 | 狀態 |
|---|----------|------|------|------|------|
| 4.1 | 情境資料模型 | Scenario/Dialogue 結構 | 1.7 | 1h | ⏳ |
| 4.2 | 情境 API - 列表 | 分頁 + 篩選 | 1.9 | 2h | ⏳ |
| 4.3 | 情境 API - 詳情 | 取得對話內容 | 4.2 | 1h | ⏳ |
| 4.4 | 情境 API - 篩選 | 分類/難度/角色 | 4.2 | 1h | ⏳ |
| 4.5 | 單字資料模型 | Vocabulary 結構 | 1.7 | 1h | ⏳ |
| 4.6 | 單字 API | 查詢 + 關聯情境 | 4.5 | 1h | ⏳ |
| 4.7 | Flutter 情境列表 | 卡片式列表 | 4.2 | 2h | ⏳ |
| 4.8 | Flutter 情境詳情 | 對話預覽 | 4.3 | 2h | ⏳ |
| 4.9 | Flutter 單字顯示 | 單字卡片元件 | 4.6 | 1h | ⏳ |
| 4.10 | Nuxt.js 情境列表 | 卡片式列表 | 4.2 | 2h | ⏳ |
| 4.11 | Nuxt.js 情境詳情 | 對話預覽 | 4.3 | 2h | ⏳ |
| 4.12 | Nuxt.js 單字顯示 | 單字卡片元件 | 4.6 | 1h | ⏳ |

---

### 5. 語音系統 (10 項)

| # | 功能名稱 | 描述 | 依賴 | 預估 | 狀態 |
|---|----------|------|------|------|------|
| 5.1 | STT 服務整合 | 語音轉文字 API | - | 4h | ⏳ |
| 5.2 | TTS 服務整合 | 文字轉語音 API | - | 4h | ⏳ |
| 5.3 | WebSocket 服務 | 即時對話通道 | 1.9 | 4h | ⏳ |
| 5.4 | 練習開始 API | 建立練習會話 | 4.2 | 2h | ⏳ |
| 5.5 | 語音提交 API | 接收音頻 + STT | 5.1, 5.3 | 2h | ⏳ |
| 5.6 | Flutter 錄音模組 | record 套件整合 | 1.2 | 2h | ⏳ |
| 5.7 | Flutter TTS 播放 | flutter_tts 套件 | 1.2 | 2h | ⏳ |
| 5.8 | Nuxt.js 錄音 | MediaRecorder API | 1.3 | 2h | ⏳ |
| 5.9 | Nuxt.js TTS 播放 | Web Speech API | 1.3 | 2h | ⏳ |
| 5.10 | 對話頁面 UI | 即時對話介面 | 4.7, 4.10 | 4h | ⏳ |

---

### 6. AI 評估 (10 項)

| # | 功能名稱 | 描述 | 依賴 | 預估 | 狀態 |
|---|----------|------|------|------|------|
| 6.1 | AI 評估 API | GPT-4/Claude 整合 | - | 4h | ⏳ |
| 6.2 | 發音評估服務 | 發音分數計算 (0-30) | 6.1 | 2h | ⏳ |
| 6.3 | 語法評估服務 | 語法分數計算 (0-30) | 6.1 | 2h | ⏳ |
| 6.4 | 用詞評估服務 | 用詞分數計算 (0-20) | 6.1 | 2h | ⏳ |
| 6.5 | 流暢度評估服務 | 流暢度分數計算 (0-20) | 6.1 | 2h | ⏳ |
| 6.6 | 評估結果 API | 回傳完整評分 | 6.2-6.5 | 2h | ⏳ |
| 6.7 | 練習記錄 API | 儲存練習結果 | 5.4 | 2h | ⏳ |
| 6.8 | 錯誤日誌 API | 記錄錯誤句子 | 6.7 | 2h | ⏳ |
| 6.9 | Flutter 評估顯示 | 分數卡片元件 | 6.6 | 2h | ⏳ |
| 6.10 | Flutter 反饋顯示 | AI 建議顯示 | 6.6 | 2h | ⏳ |

---

### 7. 等級系統 (10 項)

| # | 功能名稱 | 描述 | 依賴 | 預估 | 狀態 |
|---|----------|------|------|------|------|
| 7.1 | 等級計算服務 | 0-10 級計算 | 6.7 | 2h | ⏳ |
| 7.2 | 升級判斷服務 | 連續/累計達標判斷 | 7.1 | 2h | ⏳ |
| 7.3 | 折扣計算服務 | 80%/60% 折扣 | 7.1 | 1h | ⏳ |
| 7.4 | 等級 API | 取得用戶等級 | 7.1 | 1h | ⏳ |
| 7.5 | 進度 API | 練習進度查詢 | 6.7 | 1h | ⏳ |
| 7.6 | Flutter 等級顯示 | 等級進度條 | 7.4 | 2h | ⏳ |
| 7.7 | Flutter 統計儀表板 | 練習統計 | 7.5 | 2h | ⏳ |
| 7.8 | Flutter 升級彈窗 | 升級通知 UI | 7.2 | 1h | ⏳ |
| 7.9 | 錯誤複習 API | 錯誤清單查詢 | 6.8 | 1h | ⏳ |
| 7.10 | Flutter 錯誤複習 | 複習介面 | 7.9 | 2h | ⏳ |

---

### 8. 訂閱系統 (10 項)

| # | 功能名稱 | 描述 | 依賴 | 預估 | 狀態 |
|---|----------|------|------|------|------|
| 8.1 | 訂閱方案 API | 取得方案列表 | 1.7 | 1h | ⏳ |
| 8.2 | 訂閱購買 API | 建立訂單 | 7.3 | 2h | ⏳ |
| 8.3 | 支付整合 | 綠界科技/Stripe | 8.2 | 4h | ⏳ |
| 8.4 | 訂閱狀態 API | 查詢訂閱狀態 | 8.1 | 1h | ⏳ |
| 8.5 | 訂閱過期處理 | 自動降級 | 8.4 | 2h | ⏳ |
| 8.6 | 權限檢查 Middleware | 訂閱權限 | 1.9 | 2h | ⏳ |
| 8.7 | Flutter 訂閱頁面 | 方案選擇 UI | 8.1 | 2h | ⏳ |
| 8.8 | Flutter 支付流程 | 付款介面 | 8.3 | 2h | ⏳ |
| 8.9 | Flutter 訂閱管理 | 訂閱狀態顯示 | 8.4 | 1h | ⏳ |
| 8.10 | 試用期管理 | 3天/7天邏輯 | 2.3, 2.6 | 2h | ⏳ |

---

### 9. 整合測試 (7 項)

| # | 功能名稱 | 描述 | 依賴 | 預估 | 狀態 |
|---|----------|------|------|------|------|
| 9.1 | API 整合測試 | 全 API 測試 | 1-8 | 4h | ⏳ |
| 9.2 | Flutter 整合測試 | E2E 測試 | 1-8 | 4h | ⏳ |
| 9.3 | Nuxt.js 整合測試 | E2E 測試 | 1-8 | 4h | ⏳ |
| 9.4 | 效能測試 | 負載測試 | 9.1 | 4h | ⏳ |
| 9.5 | 安全測試 | 滲透測試 | 9.1 | 2h | ⏳ |
| 9.6 | 文件更新 | API 文件更新 | 1-8 | 2h | ⏳ |
| 9.7 | 部署腳本 | Docker + K8s | 1-8 | 4h | ⏳ |

---

## 總覽表

| 類別 | 功能數 | 預估時間 |
|------|--------|----------|
| 1. 基礎建設 | 12 | 21h |
| 2. 設備綁定 | 8 | 12h |
| 3. 用戶認證 | 10 | 18h |
| 4. 情境系統 | 12 | 17h |
| 5. 語音系統 | 10 | 30h |
| 6. AI 評估 | 10 | 21h |
| 7. 等級系統 | 10 | 15h |
| 8. 訂閱系統 | 10 | 21h |
| 9. 整合測試 | 7 | 24h |
| **總計** | **89** | **179h** |

---

## 開發順序

```
Phase 1: 基礎建設 + 設備綁定
  ↓
Phase 2: 用戶認證
  ↓
Phase 3: 情境系統
  ↓
Phase 4: 語音系統 + AI 評估
  ↓
Phase 5: 等級系統 + 訂閱系統
  ↓
Phase 6: 整合測試
```

---

**版本**: v1.0.0  
**建立日期**: 2024-XX-XX
